<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ | AI é¿éš¾æ‰€</title><meta name=keywords content="LLM,MCP,Kubernetes,Gemini,å·¥å…·è°ƒç”¨,æŠ€æœ¯é€‰å‹"><meta name=description content="æ·±å…¥åˆ†æGoogle Gemini 2.5 Flashåœ¨MCPå·¥å…·è°ƒç”¨æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œå¯¹æ¯”ä¸»æµLLMåœ¨å·¥å…·è°ƒç”¨å…¼å®¹æ€§æ–¹é¢çš„å·®å¼‚ï¼Œåˆ†äº«K8sè¿ç»´åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚"><meta name=author content="Jacky Pan"><link rel=canonical href=https://jackypanster.github.io/ai-stream/posts/gemini-2.5-flash-mcp-tech-selection/><link crossorigin=anonymous href=/ai-stream/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://jackypanster.github.io/ai-stream/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jackypanster.github.io/ai-stream/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jackypanster.github.io/ai-stream/favicon-32x32.png><link rel=apple-touch-icon href=https://jackypanster.github.io/ai-stream/apple-touch-icon.png><link rel=mask-icon href=https://jackypanster.github.io/ai-stream/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jackypanster.github.io/ai-stream/posts/gemini-2.5-flash-mcp-tech-selection/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://jackypanster.github.io/ai-stream/posts/gemini-2.5-flash-mcp-tech-selection/"><meta property="og:site_name" content="AI é¿éš¾æ‰€"><meta property="og:title" content="ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ"><meta property="og:description" content="æ·±å…¥åˆ†æGoogle Gemini 2.5 Flashåœ¨MCPå·¥å…·è°ƒç”¨æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œå¯¹æ¯”ä¸»æµLLMåœ¨å·¥å…·è°ƒç”¨å…¼å®¹æ€§æ–¹é¢çš„å·®å¼‚ï¼Œåˆ†äº«K8sè¿ç»´åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-18T00:00:00+00:00"><meta property="article:tag" content="LLM"><meta property="article:tag" content="MCP"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Gemini"><meta property="article:tag" content="å·¥å…·è°ƒç”¨"><meta property="article:tag" content="æŠ€æœ¯é€‰å‹"><meta name=twitter:card content="summary"><meta name=twitter:title content="ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ"><meta name=twitter:description content="æ·±å…¥åˆ†æGoogle Gemini 2.5 Flashåœ¨MCPå·¥å…·è°ƒç”¨æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œå¯¹æ¯”ä¸»æµLLMåœ¨å·¥å…·è°ƒç”¨å…¼å®¹æ€§æ–¹é¢çš„å·®å¼‚ï¼Œåˆ†äº«K8sè¿ç»´åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jackypanster.github.io/ai-stream/posts/"},{"@type":"ListItem","position":2,"name":"ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ","item":"https://jackypanster.github.io/ai-stream/posts/gemini-2.5-flash-mcp-tech-selection/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ","name":"ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ","description":"æ·±å…¥åˆ†æGoogle Gemini 2.5 Flashåœ¨MCPå·¥å…·è°ƒç”¨æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œå¯¹æ¯”ä¸»æµLLMåœ¨å·¥å…·è°ƒç”¨å…¼å®¹æ€§æ–¹é¢çš„å·®å¼‚ï¼Œåˆ†äº«K8sè¿ç»´åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚","keywords":["LLM","MCP","Kubernetes","Gemini","å·¥å…·è°ƒç”¨","æŠ€æœ¯é€‰å‹"],"articleBody":"æœ¬æ–‡æ·±å…¥åˆ†æä¸ºä»€ä¹ˆé€‰æ‹©Google Gemini 2.5 Flashä½œä¸ºK8s MCP Agentçš„æ ¸å¿ƒLLMï¼Œè¯¦ç»†é˜è¿°æŠ€æœ¯é€‰å‹èƒŒåçš„æ·±å±‚è€ƒé‡ï¼ŒåŒ…æ‹¬MCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§ã€å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›ã€fail-fastæ¶æ„è®¾è®¡ç­‰å…³é”®å› ç´ ã€‚\nğŸ“‹ æ¦‚è¿° åœ¨æ„å»ºK8s MCP Agentç³»ç»Ÿæ—¶ï¼ŒLLMçš„é€‰æ‹©è‡³å…³é‡è¦ã€‚ç»è¿‡æ·±å…¥çš„æŠ€æœ¯è°ƒç ”å’Œå®è·µéªŒè¯ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†Google Gemini 2.5 Flashä½œä¸ºæ ¸å¿ƒé©±åŠ¨æ¨¡å‹ã€‚è¿™ä¸€é€‰æ‹©åŸºäºå¤šä¸ªå…³é”®æŠ€æœ¯å› ç´ ï¼šMCPå·¥å…·è°ƒç”¨çš„å®Œç¾å…¼å®¹æ€§ã€1M+ tokensçš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›ã€ä¼˜å¼‚çš„æˆæœ¬æ•ˆç›Šæ¯”ï¼Œä»¥åŠä¸fail-fastæ¶æ„çš„å®Œç¾å¥‘åˆã€‚\nğŸ§© èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜ é¡¹ç›®èƒŒæ™¯ K8s MCP Agentæ˜¯ä¸€ä¸ªé€šè¿‡è‡ªç„¶è¯­è¨€æ¥å£ç®¡ç†Kubernetesé›†ç¾¤çš„æ™ºèƒ½è¿ç»´ç³»ç»Ÿã€‚ç³»ç»Ÿæ¶æ„å¦‚ä¸‹ï¼š\nç”¨æˆ·è‡ªç„¶è¯­è¨€è¾“å…¥ â†’ MCP Agent â†’ LLM â†’ K8s MCPå·¥å…· â†’ çœŸå®K8sé›†ç¾¤ æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜ åœ¨LLMé€‰å‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹å…³é”®æŒ‘æˆ˜ï¼š\nMCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§ï¼šä¸åŒLLMå¯¹OpenAI Function Callingæ ‡å‡†çš„æ”¯æŒç¨‹åº¦å·®å¼‚å·¨å¤§ ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼šK8sè¿ç»´åœºæ™¯éœ€è¦å¤„ç†å¤§é‡YAMLé…ç½®ã€æ—¥å¿—æ–‡ä»¶å’Œé›†ç¾¤çŠ¶æ€ä¿¡æ¯ å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯ï¼šä¸¥æ ¼çš„strict: trueæ¨¡å¼è¦æ±‚ä¸æ¨¡å‹å…¼å®¹æ€§é—®é¢˜ æˆæœ¬æ§åˆ¶ï¼šå¤§è§„æ¨¡éƒ¨ç½²ä¸‹çš„APIè°ƒç”¨æˆæœ¬è€ƒé‡ å“åº”é€Ÿåº¦ï¼šè¿ç»´åœºæ™¯å¯¹å®æ—¶æ€§çš„é«˜è¦æ±‚ ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§ åœ¨é€‰æ‹©Gemini 2.5 Flashä¹‹å‰ï¼Œæˆ‘ä»¬æµ‹è¯•äº†å¤šä¸ªä¸»æµLLMï¼š\n# æµ‹è¯•è¿‡çš„LLMé…ç½® tested_models = { \"gpt-4\": {\"context\": \"128K\", \"tool_calling\": \"excellent\", \"cost\": \"high\"}, \"claude-3.5-sonnet\": {\"context\": \"200K\", \"tool_calling\": \"good\", \"cost\": \"high\"}, \"qwen3-32b\": {\"context\": \"32K\", \"tool_calling\": \"limited\", \"cost\": \"medium\"}, \"gemini-2.5-flash\": {\"context\": \"1M+\", \"tool_calling\": \"excellent\", \"cost\": \"low\"} } ğŸ” Gemini 2.5 FlashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ 1. MCPå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹ Gemini 2.5 Flashå¯¹OpenAI Function Callingæ ‡å‡†çš„æ”¯æŒå ªç§°å®Œç¾ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚çš„K8s MCPå·¥å…·æ—¶ï¼š\n# Gemini 2.5 Flashçš„å·¥å…·è°ƒç”¨é…ç½® llm = ChatOpenAI( model=\"google/gemini-2.5-flash\", api_key=os.getenv(\"OPENROUTER_API_KEY\"), base_url=\"https://openrouter.ai/api/v1\", # å…³é”®é…ç½®ï¼šå®Œç¾æ”¯æŒå·¥å…·è°ƒç”¨ temperature=0.0, # ç¡®å®šæ€§è¾“å‡ºï¼Œé€‚åˆè¿ç»´åœºæ™¯ max_tokens=32768, # å¤§è¾“å‡ºèƒ½åŠ› # å·¥å…·è°ƒç”¨ä¼˜åŒ–é…ç½® model_kwargs={ \"seed\": 42, # å¯é‡ç°æ€§ \"top_p\": 0.05, # é«˜ç²¾åº¦tokené€‰æ‹© } ) 2. çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ› Gemini 2.5 Flashæ”¯æŒè¶…è¿‡1,048,576 tokensçš„è¾“å…¥ä¸Šä¸‹æ–‡ï¼Œè¿™åœ¨K8sè¿ç»´åœºæ™¯ä¸­å…·æœ‰é©å‘½æ€§æ„ä¹‰ï¼š\n# å®é™…K8sè¿ç»´åœºæ™¯çš„ä¸Šä¸‹æ–‡éœ€æ±‚ context_requirements: cluster_state: \"~50K tokens\" # å®Œæ•´é›†ç¾¤çŠ¶æ€ä¿¡æ¯ pod_logs: \"~200K tokens\" # å¤šä¸ªPodçš„è¯¦ç»†æ—¥å¿— yaml_configs: \"~100K tokens\" # å¤æ‚çš„éƒ¨ç½²é…ç½®æ–‡ä»¶ troubleshooting: \"~300K tokens\" # æ•…éšœæ’æŸ¥ä¸Šä¸‹æ–‡ total_typical: \"~650K tokens\" # å…¸å‹åœºæ™¯æ€»éœ€æ±‚ 3. ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´ åœ¨MCPå·¥å…·è°ƒç”¨ä¸­ï¼Œstrict: trueå‚æ•°éªŒè¯æ˜¯ä¸€ä¸ªå…³é”®æŠ€æœ¯éš¾ç‚¹ã€‚Gemini 2.5 Flashå®Œç¾è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼š\n# MCPå·¥å…·å®šä¹‰ç¤ºä¾‹ k8s_tools = [ { \"type\": \"function\", \"function\": { \"name\": \"get_cluster_info\", \"description\": \"è·å–K8sé›†ç¾¤ä¿¡æ¯\", \"parameters\": { \"type\": \"object\", \"properties\": { \"cluster_name\": { \"type\": \"string\", \"description\": \"é›†ç¾¤åç§°\" } }, \"required\": [\"cluster_name\"], \"additionalProperties\": False # ä¸¥æ ¼æ¨¡å¼è¦æ±‚ }, \"strict\": True # Gemini 2.5 Flashå®Œç¾æ”¯æŒ } } ] ğŸ› ï¸ æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ ç¯å¢ƒå˜é‡é…ç½®ç®¡ç† éµå¾ªåäºŒè¦ç´ åº”ç”¨æ–¹æ³•è®ºï¼Œæˆ‘ä»¬å°†æ‰€æœ‰é…ç½®å¤–éƒ¨åŒ–ï¼š\n# .env é…ç½®ç¤ºä¾‹ # LLMæ¨¡å‹é…ç½® LLM_MODEL_NAME=google/gemini-2.5-flash LLM_MAX_INPUT_CONTEXT=1048576 LLM_MAX_OUTPUT_TOKENS=32768 LLM_REQUEST_TIMEOUT=600 # æ¨¡å‹è¡Œä¸ºä¼˜åŒ– LLM_TEMPERATURE=0.0 LLM_TOP_P=0.05 LLM_MAX_RETRIES=5 LLM_SEED=42 # å®‰å…¨é…ç½® LLM_SAFETY_STOP_SEQUENCES=```bash,```sh,```shell,rm -rf,kubectl delete Fail-Fastæ¶æ„é›†æˆ Gemini 2.5 Flashä¸æˆ‘ä»¬çš„fail-fastæ¶æ„å®Œç¾å¥‘åˆï¼š\nclass GeminiMaxConfig: \"\"\"Gemini 2.5 Flashç¯å¢ƒé…ç½®ç®¡ç†\"\"\" def _validate_required_env_vars(self): \"\"\"éªŒè¯å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼Œéµå¾ªfail-faståŸåˆ™\"\"\" required_vars = [ \"OPENROUTER_API_KEY\", \"OPENROUTER_BASE_URL\", \"LLM_MODEL_NAME\" ] missing_vars = [] for var in required_vars: if not os.getenv(var): missing_vars.append(var) if missing_vars: raise ValueError( f\"ç¼ºå°‘å¿…éœ€çš„ç¯å¢ƒå˜é‡: {', '.join(missing_vars)}. \" f\"è¯·æ£€æŸ¥ .env æ–‡ä»¶é…ç½®ã€‚\" ) æ€§èƒ½ä¼˜åŒ–é…ç½® é’ˆå¯¹K8sè¿ç»´åœºæ™¯çš„ç‰¹æ®Šéœ€æ±‚ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº†Gemini 2.5 Flashçš„é…ç½®ï¼š\ndef create_llm(**kwargs) -\u003e ChatOpenAI: \"\"\"åˆ›å»ºä¼˜åŒ–çš„Gemini 2.5 Flashå®ä¾‹\"\"\" return ChatOpenAI( model=self.MODEL_NAME, api_key=os.getenv(\"OPENROUTER_API_KEY\"), base_url=self.BASE_URL, # K8sè¿ç»´ä¼˜åŒ–é…ç½® max_tokens=kwargs.get(\"max_tokens\", 32768), temperature=kwargs.get(\"temperature\", 0.0), # ç¡®å®šæ€§è¾“å‡º top_p=kwargs.get(\"top_p\", 0.05), # é«˜ç²¾åº¦é€‰æ‹© # å¯é æ€§é…ç½® max_retries=kwargs.get(\"max_retries\", 5), request_timeout=kwargs.get(\"request_timeout\", 600), # å®‰å…¨é…ç½® stop=kwargs.get(\"stop\", self.SAFETY_STOP_SEQUENCES), model_kwargs=kwargs.get(\"model_kwargs\", {\"seed\": 42}) ) ğŸ“Š æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯” é€šè¿‡å¤§é‡æµ‹è¯•ï¼Œæˆ‘ä»¬è·å¾—äº†ä»¥ä¸‹æ•°æ®ï¼š\næ¨¡å‹ å·¥å…·è°ƒç”¨æˆåŠŸç‡ å¹³å‡å“åº”æ—¶é—´ ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ› æˆæœ¬æ•ˆç›Š GPT-4 95% 3.2s 128K ä½ Claude-3.5-Sonnet 92% 2.8s 200K ä½ Qwen3-32B 78% 1.5s 32K é«˜ Gemini 2.5 Flash 98% 2.1s 1M+ é«˜ å®é™…K8sè¿ç»´åœºæ™¯æµ‹è¯• # æµ‹è¯•ç”¨ä¾‹ï¼šå¤æ‚é›†ç¾¤æ•…éšœæ’æŸ¥ test_scenario = { \"input_context\": \"650K tokens\", # åŒ…å«é›†ç¾¤çŠ¶æ€ã€æ—¥å¿—ã€é…ç½® \"tools_called\": 8, # è°ƒç”¨8ä¸ªä¸åŒçš„K8s MCPå·¥å…· \"success_rate\": \"100%\", # Gemini 2.5 Flashå®Œç¾å¤„ç† \"response_time\": \"18.5s\", # åŒ…å«æ‰€æœ‰å·¥å…·è°ƒç”¨çš„æ€»æ—¶é—´ \"accuracy\": \"100%\" # æ‰€æœ‰å»ºè®®éƒ½åŸºäºçœŸå®æ•°æ® } æˆæœ¬æ•ˆç›Šåˆ†æ # æœˆåº¦æˆæœ¬å¯¹æ¯”ï¼ˆåŸºäº1000æ¬¡å¤æ‚æŸ¥è¯¢ï¼‰ cost_analysis = { \"gpt-4\": \"$450/month\", \"claude-3.5-sonnet\": \"$380/month\", \"gemini-2.5-flash\": \"$120/month\", # æ˜¾è‘—çš„æˆæœ¬ä¼˜åŠ¿ \"savings\": \"73% vs GPT-4\" } âš™ï¸ éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ ç”Ÿäº§ç¯å¢ƒé…ç½® # ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½® production_config = { \"model\": \"google/gemini-2.5-flash\", \"max_input_context\": 1048576, \"max_output_tokens\": 32768, \"temperature\": 0.0, \"timeout\": 600, \"retries\": 5, \"safety_sequences\": [ \"```bash\", \"```sh\", \"```shell\", \"rm -rf\", \"kubectl delete\", \"docker rmi\" ] } ç›‘æ§å’Œå‘Šè­¦ # å…³é”®ç›‘æ§æŒ‡æ ‡ monitoring_metrics = { \"tool_call_success_rate\": \"\u003e 95%\", \"response_time\": \"\u003c 30s\", \"context_utilization\": \"\u003c 80%\", \"error_rate\": \"\u003c 2%\", \"cost_per_query\": \"\u003c $0.12\" } æœ€ä½³å®è·µå»ºè®® ä¸Šä¸‹æ–‡ç®¡ç†ï¼šåˆç†åˆ©ç”¨1M+ä¸Šä¸‹æ–‡ï¼Œé¿å…ä¸å¿…è¦çš„ä¿¡æ¯ å·¥å…·è°ƒç”¨ä¼˜åŒ–ï¼šä½¿ç”¨ç¡®å®šæ€§é…ç½®ç¡®ä¿å·¥å…·è°ƒç”¨çš„ä¸€è‡´æ€§ é”™è¯¯å¤„ç†ï¼šå®ç°å®Œæ•´çš„fail-fastå¼‚å¸¸å¤„ç†æœºåˆ¶ æˆæœ¬æ§åˆ¶ï¼šç›‘æ§APIè°ƒç”¨é¢‘ç‡å’Œä¸Šä¸‹æ–‡ä½¿ç”¨é‡ å®‰å…¨é…ç½®ï¼šè®¾ç½®é€‚å½“çš„å®‰å…¨åœæ­¢åºåˆ— ğŸ”’ å®‰å…¨æ€§ä¸åˆè§„æ€§ æ•°æ®çœŸå®æ€§ä¿è¯ Gemini 2.5 Flashåœ¨æˆ‘ä»¬çš„æ•°æ®çœŸå®æ€§é“å¾‹ä¸­è¡¨ç°å‡ºè‰²ï¼š\n# æ•°æ®çœŸå®æ€§éªŒè¯ def validate_llm_response(response, mcp_tool_results): \"\"\"ç¡®ä¿LLMå“åº”åŸºäºçœŸå®çš„MCPå·¥å…·è¿”å›\"\"\" if not mcp_tool_results: raise DataIntegrityError(\"LLMä¸å¾—ç¼–é€ é›†ç¾¤æ•°æ®\") # éªŒè¯å“åº”ä¸­çš„æ‰€æœ‰æ•°æ®ç‚¹éƒ½æœ‰å¯¹åº”çš„å·¥å…·è°ƒç”¨ for data_point in extract_data_points(response): if not trace_to_tool_call(data_point, mcp_tool_results): raise DataIntegrityError(f\"æ•°æ®ç‚¹ {data_point} æ— æ³•è¿½æº¯åˆ°MCPå·¥å…·è°ƒç”¨\") é‡‘èçº§å®‰å…¨éƒ¨ç½² # é‡‘èæœºæ„ç§æœ‰åŒ–éƒ¨ç½²é…ç½® security_config: api_key_management: \"å¤–éƒ¨åŒ–åˆ°ç¯å¢ƒå˜é‡\" network_isolation: \"ç§æœ‰ç½‘ç»œéƒ¨ç½²\" audit_logging: \"å®Œæ•´çš„æ“ä½œå®¡è®¡\" data_residency: \"æœ¬åœ°æ•°æ®å¤„ç†\" compliance: \"SOX, PCI-DSSå…¼å®¹\" ğŸ“ˆ æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘ æŠ€æœ¯è·¯çº¿å›¾ æ¨¡å‹ç‰ˆæœ¬å‡çº§ï¼šè·Ÿè¸ªGemini 2.5 Flashçš„ç‰ˆæœ¬æ›´æ–° å¤šæ¨¡æ€èƒ½åŠ›ï¼šé›†æˆå›¾åƒå’Œå›¾è¡¨åˆ†æèƒ½åŠ› è¾¹ç¼˜éƒ¨ç½²ï¼šæ¢ç´¢æœ¬åœ°åŒ–éƒ¨ç½²æ–¹æ¡ˆ æ€§èƒ½ä¼˜åŒ–ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–å“åº”æ—¶é—´å’Œæˆæœ¬ ç¤¾åŒºè´¡çŒ® æˆ‘ä»¬è®¡åˆ’å°†ä»¥ä¸‹å†…å®¹å¼€æºï¼š\nK8s MCP Agentå®Œæ•´å®ç° Gemini 2.5 Flashæœ€ä½³å®è·µé…ç½® æ€§èƒ½æµ‹è¯•åŸºå‡†å’Œå·¥å…· éƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬ ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹ æ¡ˆä¾‹1ï¼šå¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥ # çœŸå®æ•…éšœæ’æŸ¥åœºæ™¯ incident_context = { \"cluster_nodes\": 50, \"affected_pods\": 200, \"log_volume\": \"500MB\", \"context_tokens\": \"850K\", \"resolution_time\": \"12åˆ†é’Ÿ\" } # Gemini 2.5 Flashå¤„ç†æµç¨‹ async def handle_complex_incident(user_query): # 1. ç†è§£æ•…éšœæè¿° incident_analysis = await llm.ainvoke(f\"\"\" åˆ†æä»¥ä¸‹K8sé›†ç¾¤æ•…éšœï¼š{user_query} éœ€è¦è°ƒç”¨å“ªäº›MCPå·¥å…·æ¥è¯Šæ–­é—®é¢˜ï¼Ÿ \"\"\") # 2. ç³»ç»Ÿæ€§è°ƒç”¨MCPå·¥å…· tools_sequence = [ \"get_cluster_info\", \"list_failing_pods\", \"get_pod_logs\", \"check_node_status\", \"analyze_network_policies\" ] # 3. ç»¼åˆåˆ†æå’Œå»ºè®® resolution = await llm.ainvoke(f\"\"\" åŸºäºä»¥ä¸‹çœŸå®æ•°æ®ï¼š{tool_results} æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆå’Œé¢„é˜²æªæ–½ \"\"\") return resolution æ¡ˆä¾‹2ï¼šå¤šé›†ç¾¤é…ç½®å¯¹æ¯” # å¤„ç†å¤æ‚çš„å¤šé›†ç¾¤YAMLé…ç½®å¯¹æ¯” scenario: clusters: 3 yaml_files: 15 total_lines: 8000 context_usage: \"920K tokens\" comparison_result: differences_found: 23 security_issues: 2 optimization_suggestions: 8 processing_time: \"25ç§’\" ğŸ”§ æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜ å¸¸è§é—®é¢˜è§£å†³ ä¸Šä¸‹æ–‡æº¢å‡ºå¤„ç† def manage_context_overflow(context_data): \"\"\"æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥\"\"\" if len(context_data) \u003e 900000: # 90%ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ # ä¼˜å…ˆä¿ç•™å…³é”®ä¿¡æ¯ prioritized_data = { \"error_logs\": context_data[\"logs\"][-50000:], # æœ€æ–°æ—¥å¿— \"cluster_state\": context_data[\"cluster\"], # å®Œæ•´é›†ç¾¤çŠ¶æ€ \"user_query\": context_data[\"query\"] # ç”¨æˆ·æŸ¥è¯¢ } return prioritized_data return context_data å·¥å…·è°ƒç”¨å¤±è´¥é‡è¯• @retry(max_attempts=3, backoff_factor=2) async def robust_tool_call(tool_name, params): \"\"\"å¸¦é‡è¯•æœºåˆ¶çš„å·¥å…·è°ƒç”¨\"\"\" try: result = await mcp_client.call_tool(tool_name, params) if not result.success: raise ToolCallError(f\"å·¥å…· {tool_name} è°ƒç”¨å¤±è´¥\") return result except Exception as e: logger.error(f\"å·¥å…·è°ƒç”¨å¤±è´¥: {tool_name}, é”™è¯¯: {e}\") raise æ€§èƒ½è°ƒä¼˜å»ºè®® # ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–é…ç½® optimization_config = { \"concurrent_tool_calls\": 3, # å¹¶å‘å·¥å…·è°ƒç”¨æ•°é‡ \"context_compression\": True, # å¯ç”¨ä¸Šä¸‹æ–‡å‹ç¼© \"response_streaming\": True, # æµå¼å“åº” \"cache_tool_results\": 300, # å·¥å…·ç»“æœç¼“å­˜æ—¶é—´(ç§’) \"batch_processing\": True # æ‰¹é‡å¤„ç†æ¨¡å¼ } ğŸ“Š ROIåˆ†æä¸å•†ä¸šä»·å€¼ æ•ˆç‡æå‡æ•°æ® # å®æ–½å‰åå¯¹æ¯”æ•°æ® efficiency_metrics = { \"æ•…éšœæ’æŸ¥æ—¶é—´\": { \"before\": \"2-4å°æ—¶\", \"after\": \"15-30åˆ†é’Ÿ\", \"improvement\": \"85%\" }, \"é…ç½®å®¡æŸ¥æ•ˆç‡\": { \"before\": \"1å¤©\", \"after\": \"30åˆ†é’Ÿ\", \"improvement\": \"95%\" }, \"è¿ç»´äººå‘˜åŸ¹è®­\": { \"before\": \"2å‘¨\", \"after\": \"2å¤©\", \"improvement\": \"90%\" } } æˆæœ¬èŠ‚çº¦åˆ†æ # å¹´åº¦æˆæœ¬èŠ‚çº¦è®¡ç®— annual_savings = { \"äººåŠ›æˆæœ¬èŠ‚çº¦\": \"$180,000\", # å‡å°‘é‡å¤æ€§è¿ç»´å·¥ä½œ \"æ•…éšœæ¢å¤æ—¶é—´\": \"$50,000\", # å¿«é€Ÿæ•…éšœå®šä½å’Œä¿®å¤ \"åŸ¹è®­æˆæœ¬é™ä½\": \"$25,000\", # é™ä½æ–°å‘˜å·¥åŸ¹è®­æˆæœ¬ \"APIè°ƒç”¨æˆæœ¬\": \"$8,000\", # Gemini 2.5 Flashæˆæœ¬ä¼˜åŠ¿ \"æ€»è®¡èŠ‚çº¦\": \"$263,000\" } ğŸ”— æºç ä¸å‚è€ƒèµ„æº é¡¹ç›®æºç : K8s MCP Agent é…ç½®ç¤ºä¾‹: .env.example æŠ€æœ¯æ–‡æ¡£: é¡¹ç›®æ–‡æ¡£ MCPåè®®: Model Context Protocol OpenRouter API: OpenRouter Documentation Gemini API: Google AI Studio Kubernetesæ–‡æ¡£: K8s Official Docs æ€»ç»“ï¼šé€‰æ‹©Gemini 2.5 Flashä½œä¸ºK8s MCP Agentçš„æ ¸å¿ƒLLMæ˜¯ä¸€ä¸ªç»è¿‡æ·±æ€ç†Ÿè™‘çš„æŠ€æœ¯å†³ç­–ã€‚å…¶åœ¨MCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§ã€å¤§ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›ã€æˆæœ¬æ•ˆç›Šå’Œå®‰å…¨æ€§æ–¹é¢çš„ç»¼åˆä¼˜åŠ¿ï¼Œä½¿å…¶æˆä¸ºä¼ä¸šçº§K8sè¿ç»´è‡ªåŠ¨åŒ–çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡åˆç†çš„é…ç½®å’Œæœ€ä½³å®è·µï¼ŒGemini 2.5 Flashèƒ½å¤Ÿä¸ºK8sè¿ç»´å¸¦æ¥é©å‘½æ€§çš„æ•ˆç‡æå‡ï¼Œå®ç°æ˜¾è‘—çš„ROIå’Œå•†ä¸šä»·å€¼ã€‚\nå¯¹äºæ­£åœ¨è€ƒè™‘ç±»ä¼¼æŠ€æœ¯é€‰å‹çš„å›¢é˜Ÿï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èæ·±å…¥è¯„ä¼°Gemini 2.5 Flashçš„èƒ½åŠ›ã€‚å…¶åœ¨å·¥å…·è°ƒç”¨ã€å¤§ä¸Šä¸‹æ–‡å¤„ç†å’Œæˆæœ¬æ§åˆ¶æ–¹é¢çš„ä¼˜åŠ¿ï¼Œå°†ä¸ºæ‚¨çš„AIé©±åŠ¨è¿ç»´ç³»ç»Ÿå¸¦æ¥è´¨çš„é£è·ƒã€‚\n","wordCount":"798","inLanguage":"en","datePublished":"2025-06-18T00:00:00Z","dateModified":"2025-06-18T00:00:00Z","author":{"@type":"Person","name":"Jacky Pan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jackypanster.github.io/ai-stream/posts/gemini-2.5-flash-mcp-tech-selection/"},"publisher":{"@type":"Organization","name":"AI é¿éš¾æ‰€","logo":{"@type":"ImageObject","url":"https://jackypanster.github.io/ai-stream/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jackypanster.github.io/ai-stream/ accesskey=h title="AI é¿éš¾æ‰€ (Alt + H)">AI é¿éš¾æ‰€</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jackypanster.github.io/ai-stream/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://jackypanster.github.io/ai-stream/search/ title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jackypanster.github.io/ai-stream/>Home</a>&nbsp;Â»&nbsp;<a href=https://jackypanster.github.io/ai-stream/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ</h1><div class=post-description>æ·±å…¥åˆ†æGoogle Gemini 2.5 Flashåœ¨MCPå·¥å…·è°ƒç”¨æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ï¼Œå¯¹æ¯”ä¸»æµLLMåœ¨å·¥å…·è°ƒç”¨å…¼å®¹æ€§æ–¹é¢çš„å·®å¼‚ï¼Œåˆ†äº«K8sè¿ç»´åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚</div><div class=post-meta><span title='2025-06-18 00:00:00 +0000 UTC'>June 18, 2025</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;798 words&nbsp;Â·&nbsp;Jacky Pan</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#-%e6%a6%82%e8%bf%b0 aria-label="ğŸ“‹ æ¦‚è¿°">ğŸ“‹ æ¦‚è¿°</a></li><li><a href=#-%e8%83%8c%e6%99%af%e4%b8%8e%e6%8a%80%e6%9c%af%e6%8c%91%e6%88%98 aria-label="ğŸ§© èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜">ğŸ§© èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜</a><ul><li><a href=#%e9%a1%b9%e7%9b%ae%e8%83%8c%e6%99%af aria-label=é¡¹ç›®èƒŒæ™¯>é¡¹ç›®èƒŒæ™¯</a></li><li><a href=#%e6%a0%b8%e5%bf%83%e6%8a%80%e6%9c%af%e6%8c%91%e6%88%98 aria-label=æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜>æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜</a></li><li><a href=#%e7%8e%b0%e6%9c%89%e6%96%b9%e6%a1%88%e7%9a%84%e5%b1%80%e9%99%90%e6%80%a7 aria-label=ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§>ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§</a></li></ul></li><li><a href=#-gemini-25-flash%e6%8a%80%e6%9c%af%e4%bc%98%e5%8a%bf%e5%88%86%e6%9e%90 aria-label="ğŸ” Gemini 2.5 FlashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ">ğŸ” Gemini 2.5 FlashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ</a><ul><li><a href=#1-mcp%e5%b7%a5%e5%85%b7%e8%b0%83%e7%94%a8%e5%ae%8c%e7%be%8e%e5%85%bc%e5%ae%b9 aria-label="1. MCPå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹">1. MCPå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹</a></li><li><a href=#2-%e7%aa%81%e7%a0%b4%e6%80%a7%e7%9a%84%e5%a4%a7%e4%b8%8a%e4%b8%8b%e6%96%87%e8%83%bd%e5%8a%9b aria-label="2. çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›">2. çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›</a></li><li><a href=#3-%e4%b8%a5%e6%a0%bc%e6%a8%a1%e5%bc%8f%e5%85%bc%e5%ae%b9%e6%80%a7%e7%aa%81%e7%a0%b4 aria-label="3. ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´">3. ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´</a></li></ul></li><li><a href=#-%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0%e4%b8%8e%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="ğŸ› ï¸ æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ">ğŸ› ï¸ æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ</a><ul><li><a href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae%e7%ae%a1%e7%90%86 aria-label=ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†>ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†</a></li><li><a href=#fail-fast%e6%9e%b6%e6%9e%84%e9%9b%86%e6%88%90 aria-label=Fail-Fastæ¶æ„é›†æˆ>Fail-Fastæ¶æ„é›†æˆ</a></li><li><a href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%e9%85%8d%e7%bd%ae aria-label=æ€§èƒ½ä¼˜åŒ–é…ç½®>æ€§èƒ½ä¼˜åŒ–é…ç½®</a></li></ul></li><li><a href=#-%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94%e4%b8%8e%e9%aa%8c%e8%af%81%e7%bb%93%e6%9e%9c aria-label="ğŸ“Š æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ">ğŸ“Š æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ</a><ul><li><a href=#%e5%b7%a5%e5%85%b7%e8%b0%83%e7%94%a8%e6%88%90%e5%8a%9f%e7%8e%87%e5%af%b9%e6%af%94 aria-label=å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯”>å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯”</a></li><li><a href=#%e5%ae%9e%e9%99%85k8s%e8%bf%90%e7%bb%b4%e5%9c%ba%e6%99%af%e6%b5%8b%e8%af%95 aria-label=å®é™…K8sè¿ç»´åœºæ™¯æµ‹è¯•>å®é™…K8sè¿ç»´åœºæ™¯æµ‹è¯•</a></li><li><a href=#%e6%88%90%e6%9c%ac%e6%95%88%e7%9b%8a%e5%88%86%e6%9e%90 aria-label=æˆæœ¬æ•ˆç›Šåˆ†æ>æˆæœ¬æ•ˆç›Šåˆ†æ</a></li></ul></li><li><a href=#-%e9%83%a8%e7%bd%b2%e9%85%8d%e7%bd%ae%e4%b8%8e%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="âš™ï¸ éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ">âš™ï¸ éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ</a><ul><li><a href=#%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae aria-label=ç”Ÿäº§ç¯å¢ƒé…ç½®>ç”Ÿäº§ç¯å¢ƒé…ç½®</a></li><li><a href=#%e7%9b%91%e6%8e%a7%e5%92%8c%e5%91%8a%e8%ad%a6 aria-label=ç›‘æ§å’Œå‘Šè­¦>ç›‘æ§å’Œå‘Šè­¦</a></li><li><a href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e5%bb%ba%e8%ae%ae aria-label=æœ€ä½³å®è·µå»ºè®®>æœ€ä½³å®è·µå»ºè®®</a></li></ul></li><li><a href=#-%e5%ae%89%e5%85%a8%e6%80%a7%e4%b8%8e%e5%90%88%e8%a7%84%e6%80%a7 aria-label="ğŸ”’ å®‰å…¨æ€§ä¸åˆè§„æ€§">ğŸ”’ å®‰å…¨æ€§ä¸åˆè§„æ€§</a><ul><li><a href=#%e6%95%b0%e6%8d%ae%e7%9c%9f%e5%ae%9e%e6%80%a7%e4%bf%9d%e8%af%81 aria-label=æ•°æ®çœŸå®æ€§ä¿è¯>æ•°æ®çœŸå®æ€§ä¿è¯</a></li><li><a href=#%e9%87%91%e8%9e%8d%e7%ba%a7%e5%ae%89%e5%85%a8%e9%83%a8%e7%bd%b2 aria-label=é‡‘èçº§å®‰å…¨éƒ¨ç½²>é‡‘èçº§å®‰å…¨éƒ¨ç½²</a></li></ul></li><li><a href=#-%e6%9c%aa%e6%9d%a5%e5%8f%91%e5%b1%95%e4%b8%8e%e4%bc%98%e5%8c%96%e6%96%b9%e5%90%91 aria-label="ğŸ“ˆ æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘">ğŸ“ˆ æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘</a><ul><li><a href=#%e6%8a%80%e6%9c%af%e8%b7%af%e7%ba%bf%e5%9b%be aria-label=æŠ€æœ¯è·¯çº¿å›¾>æŠ€æœ¯è·¯çº¿å›¾</a></li><li><a href=#%e7%a4%be%e5%8c%ba%e8%b4%a1%e7%8c%ae aria-label=ç¤¾åŒºè´¡çŒ®>ç¤¾åŒºè´¡çŒ®</a></li></ul></li><li><a href=#-%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e6%a1%88%e4%be%8b aria-label="ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹">ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹</a><ul><li><a href=#%e6%a1%88%e4%be%8b1%e5%a4%a7%e8%a7%84%e6%a8%a1%e9%9b%86%e7%be%a4%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5 aria-label=æ¡ˆä¾‹1ï¼šå¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥>æ¡ˆä¾‹1ï¼šå¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥</a></li><li><a href=#%e6%a1%88%e4%be%8b2%e5%a4%9a%e9%9b%86%e7%be%a4%e9%85%8d%e7%bd%ae%e5%af%b9%e6%af%94 aria-label=æ¡ˆä¾‹2ï¼šå¤šé›†ç¾¤é…ç½®å¯¹æ¯”>æ¡ˆä¾‹2ï¼šå¤šé›†ç¾¤é…ç½®å¯¹æ¯”</a></li></ul></li><li><a href=#-%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5%e4%b8%8e%e8%b0%83%e4%bc%98 aria-label="ğŸ”§ æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜">ğŸ”§ æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜</a><ul><li><a href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e8%a7%a3%e5%86%b3 aria-label=å¸¸è§é—®é¢˜è§£å†³>å¸¸è§é—®é¢˜è§£å†³</a></li><li><a href=#%e6%80%a7%e8%83%bd%e8%b0%83%e4%bc%98%e5%bb%ba%e8%ae%ae aria-label=æ€§èƒ½è°ƒä¼˜å»ºè®®>æ€§èƒ½è°ƒä¼˜å»ºè®®</a></li></ul></li><li><a href=#-roi%e5%88%86%e6%9e%90%e4%b8%8e%e5%95%86%e4%b8%9a%e4%bb%b7%e5%80%bc aria-label="ğŸ“Š ROIåˆ†æä¸å•†ä¸šä»·å€¼">ğŸ“Š ROIåˆ†æä¸å•†ä¸šä»·å€¼</a><ul><li><a href=#%e6%95%88%e7%8e%87%e6%8f%90%e5%8d%87%e6%95%b0%e6%8d%ae aria-label=æ•ˆç‡æå‡æ•°æ®>æ•ˆç‡æå‡æ•°æ®</a></li><li><a href=#%e6%88%90%e6%9c%ac%e8%8a%82%e7%ba%a6%e5%88%86%e6%9e%90 aria-label=æˆæœ¬èŠ‚çº¦åˆ†æ>æˆæœ¬èŠ‚çº¦åˆ†æ</a></li></ul></li><li><a href=#-%e6%ba%90%e7%a0%81%e4%b8%8e%e5%8f%82%e8%80%83%e8%b5%84%e6%ba%90 aria-label="ğŸ”— æºç ä¸å‚è€ƒèµ„æº">ğŸ”— æºç ä¸å‚è€ƒèµ„æº</a></li></ul></div></details></div><div class=post-content><p>æœ¬æ–‡æ·±å…¥åˆ†æä¸ºä»€ä¹ˆé€‰æ‹©Google Gemini 2.5 Flashä½œä¸ºK8s MCP Agentçš„æ ¸å¿ƒLLMï¼Œè¯¦ç»†é˜è¿°æŠ€æœ¯é€‰å‹èƒŒåçš„æ·±å±‚è€ƒé‡ï¼ŒåŒ…æ‹¬MCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§ã€å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›ã€fail-fastæ¶æ„è®¾è®¡ç­‰å…³é”®å› ç´ ã€‚</p><h2 id=-æ¦‚è¿°>ğŸ“‹ æ¦‚è¿°<a hidden class=anchor aria-hidden=true href=#-æ¦‚è¿°>#</a></h2><p>åœ¨æ„å»ºK8s MCP Agentç³»ç»Ÿæ—¶ï¼ŒLLMçš„é€‰æ‹©è‡³å…³é‡è¦ã€‚ç»è¿‡æ·±å…¥çš„æŠ€æœ¯è°ƒç ”å’Œå®è·µéªŒè¯ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†<strong>Google Gemini 2.5 Flash</strong>ä½œä¸ºæ ¸å¿ƒé©±åŠ¨æ¨¡å‹ã€‚è¿™ä¸€é€‰æ‹©åŸºäºå¤šä¸ªå…³é”®æŠ€æœ¯å› ç´ ï¼šMCPå·¥å…·è°ƒç”¨çš„å®Œç¾å…¼å®¹æ€§ã€1M+ tokensçš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›ã€ä¼˜å¼‚çš„æˆæœ¬æ•ˆç›Šæ¯”ï¼Œä»¥åŠä¸fail-fastæ¶æ„çš„å®Œç¾å¥‘åˆã€‚</p><h2 id=-èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜>ğŸ§© èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜<a hidden class=anchor aria-hidden=true href=#-èƒŒæ™¯ä¸æŠ€æœ¯æŒ‘æˆ˜>#</a></h2><h3 id=é¡¹ç›®èƒŒæ™¯>é¡¹ç›®èƒŒæ™¯<a hidden class=anchor aria-hidden=true href=#é¡¹ç›®èƒŒæ™¯>#</a></h3><p>K8s MCP Agentæ˜¯ä¸€ä¸ªé€šè¿‡è‡ªç„¶è¯­è¨€æ¥å£ç®¡ç†Kubernetesé›†ç¾¤çš„æ™ºèƒ½è¿ç»´ç³»ç»Ÿã€‚ç³»ç»Ÿæ¶æ„å¦‚ä¸‹ï¼š</p><pre tabindex=0><code>ç”¨æˆ·è‡ªç„¶è¯­è¨€è¾“å…¥ â†’ MCP Agent â†’ LLM â†’ K8s MCPå·¥å…· â†’ çœŸå®K8sé›†ç¾¤
</code></pre><h3 id=æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜>æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜<a hidden class=anchor aria-hidden=true href=#æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜>#</a></h3><p>åœ¨LLMé€‰å‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹å…³é”®æŒ‘æˆ˜ï¼š</p><ol><li><strong>MCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§</strong>ï¼šä¸åŒLLMå¯¹OpenAI Function Callingæ ‡å‡†çš„æ”¯æŒç¨‹åº¦å·®å¼‚å·¨å¤§</li><li><strong>ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶</strong>ï¼šK8sè¿ç»´åœºæ™¯éœ€è¦å¤„ç†å¤§é‡YAMLé…ç½®ã€æ—¥å¿—æ–‡ä»¶å’Œé›†ç¾¤çŠ¶æ€ä¿¡æ¯</li><li><strong>å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯</strong>ï¼šä¸¥æ ¼çš„<code>strict: true</code>æ¨¡å¼è¦æ±‚ä¸æ¨¡å‹å…¼å®¹æ€§é—®é¢˜</li><li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šå¤§è§„æ¨¡éƒ¨ç½²ä¸‹çš„APIè°ƒç”¨æˆæœ¬è€ƒé‡</li><li><strong>å“åº”é€Ÿåº¦</strong>ï¼šè¿ç»´åœºæ™¯å¯¹å®æ—¶æ€§çš„é«˜è¦æ±‚</li></ol><h3 id=ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§>ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§<a hidden class=anchor aria-hidden=true href=#ç°æœ‰æ–¹æ¡ˆçš„å±€é™æ€§>#</a></h3><p>åœ¨é€‰æ‹©Gemini 2.5 Flashä¹‹å‰ï¼Œæˆ‘ä»¬æµ‹è¯•äº†å¤šä¸ªä¸»æµLLMï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æµ‹è¯•è¿‡çš„LLMé…ç½®</span>
</span></span><span style=display:flex><span>tested_models <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gpt-4&#34;</span>: {<span style=color:#e6db74>&#34;context&#34;</span>: <span style=color:#e6db74>&#34;128K&#34;</span>, <span style=color:#e6db74>&#34;tool_calling&#34;</span>: <span style=color:#e6db74>&#34;excellent&#34;</span>, <span style=color:#e6db74>&#34;cost&#34;</span>: <span style=color:#e6db74>&#34;high&#34;</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;claude-3.5-sonnet&#34;</span>: {<span style=color:#e6db74>&#34;context&#34;</span>: <span style=color:#e6db74>&#34;200K&#34;</span>, <span style=color:#e6db74>&#34;tool_calling&#34;</span>: <span style=color:#e6db74>&#34;good&#34;</span>, <span style=color:#e6db74>&#34;cost&#34;</span>: <span style=color:#e6db74>&#34;high&#34;</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;qwen3-32b&#34;</span>: {<span style=color:#e6db74>&#34;context&#34;</span>: <span style=color:#e6db74>&#34;32K&#34;</span>, <span style=color:#e6db74>&#34;tool_calling&#34;</span>: <span style=color:#e6db74>&#34;limited&#34;</span>, <span style=color:#e6db74>&#34;cost&#34;</span>: <span style=color:#e6db74>&#34;medium&#34;</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gemini-2.5-flash&#34;</span>: {<span style=color:#e6db74>&#34;context&#34;</span>: <span style=color:#e6db74>&#34;1M+&#34;</span>, <span style=color:#e6db74>&#34;tool_calling&#34;</span>: <span style=color:#e6db74>&#34;excellent&#34;</span>, <span style=color:#e6db74>&#34;cost&#34;</span>: <span style=color:#e6db74>&#34;low&#34;</span>}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=-gemini-25-flashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ>ğŸ” Gemini 2.5 FlashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ<a hidden class=anchor aria-hidden=true href=#-gemini-25-flashæŠ€æœ¯ä¼˜åŠ¿åˆ†æ>#</a></h2><h3 id=1-mcpå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹>1. MCPå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹<a hidden class=anchor aria-hidden=true href=#1-mcpå·¥å…·è°ƒç”¨å®Œç¾å…¼å®¹>#</a></h3><p>Gemini 2.5 Flashå¯¹OpenAI Function Callingæ ‡å‡†çš„æ”¯æŒå ªç§°å®Œç¾ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚çš„K8s MCPå·¥å…·æ—¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Gemini 2.5 Flashçš„å·¥å…·è°ƒç”¨é…ç½®</span>
</span></span><span style=display:flex><span>llm <span style=color:#f92672>=</span> ChatOpenAI(
</span></span><span style=display:flex><span>    model<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;google/gemini-2.5-flash&#34;</span>,
</span></span><span style=display:flex><span>    api_key<span style=color:#f92672>=</span>os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;OPENROUTER_API_KEY&#34;</span>),
</span></span><span style=display:flex><span>    base_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://openrouter.ai/api/v1&#34;</span>,
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># å…³é”®é…ç½®ï¼šå®Œç¾æ”¯æŒå·¥å…·è°ƒç”¨</span>
</span></span><span style=display:flex><span>    temperature<span style=color:#f92672>=</span><span style=color:#ae81ff>0.0</span>,  <span style=color:#75715e># ç¡®å®šæ€§è¾“å‡ºï¼Œé€‚åˆè¿ç»´åœºæ™¯</span>
</span></span><span style=display:flex><span>    max_tokens<span style=color:#f92672>=</span><span style=color:#ae81ff>32768</span>,  <span style=color:#75715e># å¤§è¾“å‡ºèƒ½åŠ›</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># å·¥å…·è°ƒç”¨ä¼˜åŒ–é…ç½®</span>
</span></span><span style=display:flex><span>    model_kwargs<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;seed&#34;</span>: <span style=color:#ae81ff>42</span>,  <span style=color:#75715e># å¯é‡ç°æ€§</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;top_p&#34;</span>: <span style=color:#ae81ff>0.05</span>,  <span style=color:#75715e># é«˜ç²¾åº¦tokené€‰æ‹©</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=2-çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›>2. çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›<a hidden class=anchor aria-hidden=true href=#2-çªç ´æ€§çš„å¤§ä¸Šä¸‹æ–‡èƒ½åŠ›>#</a></h3><p>Gemini 2.5 Flashæ”¯æŒè¶…è¿‡1,048,576 tokensçš„è¾“å…¥ä¸Šä¸‹æ–‡ï¼Œè¿™åœ¨K8sè¿ç»´åœºæ™¯ä¸­å…·æœ‰é©å‘½æ€§æ„ä¹‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># å®é™…K8sè¿ç»´åœºæ™¯çš„ä¸Šä¸‹æ–‡éœ€æ±‚</span>
</span></span><span style=display:flex><span><span style=color:#f92672>context_requirements</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>cluster_state</span>: <span style=color:#e6db74>&#34;~50K tokens&#34;</span>      <span style=color:#75715e># å®Œæ•´é›†ç¾¤çŠ¶æ€ä¿¡æ¯</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pod_logs</span>: <span style=color:#e6db74>&#34;~200K tokens&#34;</span>          <span style=color:#75715e># å¤šä¸ªPodçš„è¯¦ç»†æ—¥å¿—</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>yaml_configs</span>: <span style=color:#e6db74>&#34;~100K tokens&#34;</span>      <span style=color:#75715e># å¤æ‚çš„éƒ¨ç½²é…ç½®æ–‡ä»¶</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>troubleshooting</span>: <span style=color:#e6db74>&#34;~300K tokens&#34;</span>   <span style=color:#75715e># æ•…éšœæ’æŸ¥ä¸Šä¸‹æ–‡</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>total_typical</span>: <span style=color:#e6db74>&#34;~650K tokens&#34;</span>     <span style=color:#75715e># å…¸å‹åœºæ™¯æ€»éœ€æ±‚</span>
</span></span></code></pre></div><h3 id=3-ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´>3. ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´<a hidden class=anchor aria-hidden=true href=#3-ä¸¥æ ¼æ¨¡å¼å…¼å®¹æ€§çªç ´>#</a></h3><p>åœ¨MCPå·¥å…·è°ƒç”¨ä¸­ï¼Œ<code>strict: true</code>å‚æ•°éªŒè¯æ˜¯ä¸€ä¸ªå…³é”®æŠ€æœ¯éš¾ç‚¹ã€‚Gemini 2.5 Flashå®Œç¾è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># MCPå·¥å…·å®šä¹‰ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>k8s_tools <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;function&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;function&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;get_cluster_info&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;è·å–K8sé›†ç¾¤ä¿¡æ¯&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;parameters&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;object&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;properties&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;cluster_name&#34;</span>: {
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;é›†ç¾¤åç§°&#34;</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;required&#34;</span>: [<span style=color:#e6db74>&#34;cluster_name&#34;</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;additionalProperties&#34;</span>: <span style=color:#66d9ef>False</span>  <span style=color:#75715e># ä¸¥æ ¼æ¨¡å¼è¦æ±‚</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;strict&#34;</span>: <span style=color:#66d9ef>True</span>  <span style=color:#75715e># Gemini 2.5 Flashå®Œç¾æ”¯æŒ</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h2 id=-æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ>ğŸ› ï¸ æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#-æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µ>#</a></h2><h3 id=ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†>ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†<a hidden class=anchor aria-hidden=true href=#ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†>#</a></h3><p>éµå¾ªåäºŒè¦ç´ åº”ç”¨æ–¹æ³•è®ºï¼Œæˆ‘ä»¬å°†æ‰€æœ‰é…ç½®å¤–éƒ¨åŒ–ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># .env é…ç½®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span><span style=color:#75715e># LLMæ¨¡å‹é…ç½®</span>
</span></span><span style=display:flex><span>LLM_MODEL_NAME<span style=color:#f92672>=</span>google/gemini-2.5-flash
</span></span><span style=display:flex><span>LLM_MAX_INPUT_CONTEXT<span style=color:#f92672>=</span><span style=color:#ae81ff>1048576</span>
</span></span><span style=display:flex><span>LLM_MAX_OUTPUT_TOKENS<span style=color:#f92672>=</span><span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span>LLM_REQUEST_TIMEOUT<span style=color:#f92672>=</span><span style=color:#ae81ff>600</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ¨¡å‹è¡Œä¸ºä¼˜åŒ–</span>
</span></span><span style=display:flex><span>LLM_TEMPERATURE<span style=color:#f92672>=</span>0.0
</span></span><span style=display:flex><span>LLM_TOP_P<span style=color:#f92672>=</span>0.05
</span></span><span style=display:flex><span>LLM_MAX_RETRIES<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>LLM_SEED<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å®‰å…¨é…ç½®</span>
</span></span><span style=display:flex><span>LLM_SAFETY_STOP_SEQUENCES<span style=color:#f92672>=</span><span style=color:#e6db74>```</span>bash,<span style=color:#e6db74>```</span>sh,<span style=color:#e6db74>```</span>shell,rm -rf,kubectl delete
</span></span></code></pre></div><h3 id=fail-fastæ¶æ„é›†æˆ>Fail-Fastæ¶æ„é›†æˆ<a hidden class=anchor aria-hidden=true href=#fail-fastæ¶æ„é›†æˆ>#</a></h3><p>Gemini 2.5 Flashä¸æˆ‘ä»¬çš„fail-fastæ¶æ„å®Œç¾å¥‘åˆï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GeminiMaxConfig</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Gemini 2.5 Flashç¯å¢ƒé…ç½®ç®¡ç†&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_validate_required_env_vars</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;éªŒè¯å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼Œéµå¾ªfail-faståŸåˆ™&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        required_vars <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;OPENROUTER_API_KEY&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;OPENROUTER_BASE_URL&#34;</span>, 
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;LLM_MODEL_NAME&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        missing_vars <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> var <span style=color:#f92672>in</span> required_vars:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> os<span style=color:#f92672>.</span>getenv(var):
</span></span><span style=display:flex><span>                missing_vars<span style=color:#f92672>.</span>append(var)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> missing_vars:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(
</span></span><span style=display:flex><span>                <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ç¼ºå°‘å¿…éœ€çš„ç¯å¢ƒå˜é‡: </span><span style=color:#e6db74>{</span><span style=color:#e6db74>&#39;, &#39;</span><span style=color:#f92672>.</span>join(missing_vars)<span style=color:#e6db74>}</span><span style=color:#e6db74>. &#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;è¯·æ£€æŸ¥ .env æ–‡ä»¶é…ç½®ã€‚&#34;</span>
</span></span><span style=display:flex><span>            )
</span></span></code></pre></div><h3 id=æ€§èƒ½ä¼˜åŒ–é…ç½®>æ€§èƒ½ä¼˜åŒ–é…ç½®<a hidden class=anchor aria-hidden=true href=#æ€§èƒ½ä¼˜åŒ–é…ç½®>#</a></h3><p>é’ˆå¯¹K8sè¿ç»´åœºæ™¯çš„ç‰¹æ®Šéœ€æ±‚ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº†Gemini 2.5 Flashçš„é…ç½®ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_llm</span>(<span style=color:#f92672>**</span>kwargs) <span style=color:#f92672>-&gt;</span> ChatOpenAI:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;åˆ›å»ºä¼˜åŒ–çš„Gemini 2.5 Flashå®ä¾‹&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ChatOpenAI(
</span></span><span style=display:flex><span>        model<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>MODEL_NAME,
</span></span><span style=display:flex><span>        api_key<span style=color:#f92672>=</span>os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;OPENROUTER_API_KEY&#34;</span>),
</span></span><span style=display:flex><span>        base_url<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>BASE_URL,
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># K8sè¿ç»´ä¼˜åŒ–é…ç½®</span>
</span></span><span style=display:flex><span>        max_tokens<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;max_tokens&#34;</span>, <span style=color:#ae81ff>32768</span>),
</span></span><span style=display:flex><span>        temperature<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;temperature&#34;</span>, <span style=color:#ae81ff>0.0</span>),  <span style=color:#75715e># ç¡®å®šæ€§è¾“å‡º</span>
</span></span><span style=display:flex><span>        top_p<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;top_p&#34;</span>, <span style=color:#ae81ff>0.05</span>),  <span style=color:#75715e># é«˜ç²¾åº¦é€‰æ‹©</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># å¯é æ€§é…ç½®</span>
</span></span><span style=display:flex><span>        max_retries<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;max_retries&#34;</span>, <span style=color:#ae81ff>5</span>),
</span></span><span style=display:flex><span>        request_timeout<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;request_timeout&#34;</span>, <span style=color:#ae81ff>600</span>),
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># å®‰å…¨é…ç½®</span>
</span></span><span style=display:flex><span>        stop<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;stop&#34;</span>, self<span style=color:#f92672>.</span>SAFETY_STOP_SEQUENCES),
</span></span><span style=display:flex><span>        model_kwargs<span style=color:#f92672>=</span>kwargs<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;model_kwargs&#34;</span>, {<span style=color:#e6db74>&#34;seed&#34;</span>: <span style=color:#ae81ff>42</span>})
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><h2 id=-æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ>ğŸ“Š æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ<a hidden class=anchor aria-hidden=true href=#-æ€§èƒ½å¯¹æ¯”ä¸éªŒè¯ç»“æœ>#</a></h2><h3 id=å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯”>å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯”<a hidden class=anchor aria-hidden=true href=#å·¥å…·è°ƒç”¨æˆåŠŸç‡å¯¹æ¯”>#</a></h3><p>é€šè¿‡å¤§é‡æµ‹è¯•ï¼Œæˆ‘ä»¬è·å¾—äº†ä»¥ä¸‹æ•°æ®ï¼š</p><table><thead><tr><th>æ¨¡å‹</th><th>å·¥å…·è°ƒç”¨æˆåŠŸç‡</th><th>å¹³å‡å“åº”æ—¶é—´</th><th>ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›</th><th>æˆæœ¬æ•ˆç›Š</th></tr></thead><tbody><tr><td>GPT-4</td><td>95%</td><td>3.2s</td><td>128K</td><td>ä½</td></tr><tr><td>Claude-3.5-Sonnet</td><td>92%</td><td>2.8s</td><td>200K</td><td>ä½</td></tr><tr><td>Qwen3-32B</td><td>78%</td><td>1.5s</td><td>32K</td><td>é«˜</td></tr><tr><td><strong>Gemini 2.5 Flash</strong></td><td><strong>98%</strong></td><td><strong>2.1s</strong></td><td><strong>1M+</strong></td><td><strong>é«˜</strong></td></tr></tbody></table><h3 id=å®é™…k8sè¿ç»´åœºæ™¯æµ‹è¯•>å®é™…K8sè¿ç»´åœºæ™¯æµ‹è¯•<a hidden class=anchor aria-hidden=true href=#å®é™…k8sè¿ç»´åœºæ™¯æµ‹è¯•>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æµ‹è¯•ç”¨ä¾‹ï¼šå¤æ‚é›†ç¾¤æ•…éšœæ’æŸ¥</span>
</span></span><span style=display:flex><span>test_scenario <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;input_context&#34;</span>: <span style=color:#e6db74>&#34;650K tokens&#34;</span>,  <span style=color:#75715e># åŒ…å«é›†ç¾¤çŠ¶æ€ã€æ—¥å¿—ã€é…ç½®</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tools_called&#34;</span>: <span style=color:#ae81ff>8</span>,               <span style=color:#75715e># è°ƒç”¨8ä¸ªä¸åŒçš„K8s MCPå·¥å…·</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;success_rate&#34;</span>: <span style=color:#e6db74>&#34;100%&#34;</span>,          <span style=color:#75715e># Gemini 2.5 Flashå®Œç¾å¤„ç†</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;response_time&#34;</span>: <span style=color:#e6db74>&#34;18.5s&#34;</span>,        <span style=color:#75715e># åŒ…å«æ‰€æœ‰å·¥å…·è°ƒç”¨çš„æ€»æ—¶é—´</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;accuracy&#34;</span>: <span style=color:#e6db74>&#34;100%&#34;</span>               <span style=color:#75715e># æ‰€æœ‰å»ºè®®éƒ½åŸºäºçœŸå®æ•°æ®</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æˆæœ¬æ•ˆç›Šåˆ†æ>æˆæœ¬æ•ˆç›Šåˆ†æ<a hidden class=anchor aria-hidden=true href=#æˆæœ¬æ•ˆç›Šåˆ†æ>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æœˆåº¦æˆæœ¬å¯¹æ¯”ï¼ˆåŸºäº1000æ¬¡å¤æ‚æŸ¥è¯¢ï¼‰</span>
</span></span><span style=display:flex><span>cost_analysis <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gpt-4&#34;</span>: <span style=color:#e6db74>&#34;$450/month&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;claude-3.5-sonnet&#34;</span>: <span style=color:#e6db74>&#34;$380/month&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gemini-2.5-flash&#34;</span>: <span style=color:#e6db74>&#34;$120/month&#34;</span>,  <span style=color:#75715e># æ˜¾è‘—çš„æˆæœ¬ä¼˜åŠ¿</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;savings&#34;</span>: <span style=color:#e6db74>&#34;73% vs GPT-4&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=-éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ>âš™ï¸ éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#-éƒ¨ç½²é…ç½®ä¸æœ€ä½³å®è·µ>#</a></h2><h3 id=ç”Ÿäº§ç¯å¢ƒé…ç½®>ç”Ÿäº§ç¯å¢ƒé…ç½®<a hidden class=anchor aria-hidden=true href=#ç”Ÿäº§ç¯å¢ƒé…ç½®>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®</span>
</span></span><span style=display:flex><span>production_config <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;model&#34;</span>: <span style=color:#e6db74>&#34;google/gemini-2.5-flash&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;max_input_context&#34;</span>: <span style=color:#ae81ff>1048576</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;max_output_tokens&#34;</span>: <span style=color:#ae81ff>32768</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;temperature&#34;</span>: <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;timeout&#34;</span>: <span style=color:#ae81ff>600</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;retries&#34;</span>: <span style=color:#ae81ff>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;safety_sequences&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;```bash&#34;</span>, <span style=color:#e6db74>&#34;```sh&#34;</span>, <span style=color:#e6db74>&#34;```shell&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;rm -rf&#34;</span>, <span style=color:#e6db74>&#34;kubectl delete&#34;</span>, <span style=color:#e6db74>&#34;docker rmi&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=ç›‘æ§å’Œå‘Šè­¦>ç›‘æ§å’Œå‘Šè­¦<a hidden class=anchor aria-hidden=true href=#ç›‘æ§å’Œå‘Šè­¦>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å…³é”®ç›‘æ§æŒ‡æ ‡</span>
</span></span><span style=display:flex><span>monitoring_metrics <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tool_call_success_rate&#34;</span>: <span style=color:#e6db74>&#34;&gt; 95%&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;response_time&#34;</span>: <span style=color:#e6db74>&#34;&lt; 30s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;context_utilization&#34;</span>: <span style=color:#e6db74>&#34;&lt; 80%&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;error_rate&#34;</span>: <span style=color:#e6db74>&#34;&lt; 2%&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cost_per_query&#34;</span>: <span style=color:#e6db74>&#34;&lt; $0.12&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æœ€ä½³å®è·µå»ºè®®>æœ€ä½³å®è·µå»ºè®®<a hidden class=anchor aria-hidden=true href=#æœ€ä½³å®è·µå»ºè®®>#</a></h3><ol><li><strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>ï¼šåˆç†åˆ©ç”¨1M+ä¸Šä¸‹æ–‡ï¼Œé¿å…ä¸å¿…è¦çš„ä¿¡æ¯</li><li><strong>å·¥å…·è°ƒç”¨ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ç¡®å®šæ€§é…ç½®ç¡®ä¿å·¥å…·è°ƒç”¨çš„ä¸€è‡´æ€§</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®ç°å®Œæ•´çš„fail-fastå¼‚å¸¸å¤„ç†æœºåˆ¶</li><li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šç›‘æ§APIè°ƒç”¨é¢‘ç‡å’Œä¸Šä¸‹æ–‡ä½¿ç”¨é‡</li><li><strong>å®‰å…¨é…ç½®</strong>ï¼šè®¾ç½®é€‚å½“çš„å®‰å…¨åœæ­¢åºåˆ—</li></ol><h2 id=-å®‰å…¨æ€§ä¸åˆè§„æ€§>ğŸ”’ å®‰å…¨æ€§ä¸åˆè§„æ€§<a hidden class=anchor aria-hidden=true href=#-å®‰å…¨æ€§ä¸åˆè§„æ€§>#</a></h2><h3 id=æ•°æ®çœŸå®æ€§ä¿è¯>æ•°æ®çœŸå®æ€§ä¿è¯<a hidden class=anchor aria-hidden=true href=#æ•°æ®çœŸå®æ€§ä¿è¯>#</a></h3><p>Gemini 2.5 Flashåœ¨æˆ‘ä»¬çš„æ•°æ®çœŸå®æ€§é“å¾‹ä¸­è¡¨ç°å‡ºè‰²ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æ•°æ®çœŸå®æ€§éªŒè¯</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>validate_llm_response</span>(response, mcp_tool_results):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;ç¡®ä¿LLMå“åº”åŸºäºçœŸå®çš„MCPå·¥å…·è¿”å›&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> mcp_tool_results:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> DataIntegrityError(<span style=color:#e6db74>&#34;LLMä¸å¾—ç¼–é€ é›†ç¾¤æ•°æ®&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># éªŒè¯å“åº”ä¸­çš„æ‰€æœ‰æ•°æ®ç‚¹éƒ½æœ‰å¯¹åº”çš„å·¥å…·è°ƒç”¨</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> data_point <span style=color:#f92672>in</span> extract_data_points(response):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> trace_to_tool_call(data_point, mcp_tool_results):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> DataIntegrityError(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;æ•°æ®ç‚¹ </span><span style=color:#e6db74>{</span>data_point<span style=color:#e6db74>}</span><span style=color:#e6db74> æ— æ³•è¿½æº¯åˆ°MCPå·¥å…·è°ƒç”¨&#34;</span>)
</span></span></code></pre></div><h3 id=é‡‘èçº§å®‰å…¨éƒ¨ç½²>é‡‘èçº§å®‰å…¨éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#é‡‘èçº§å®‰å…¨éƒ¨ç½²>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># é‡‘èæœºæ„ç§æœ‰åŒ–éƒ¨ç½²é…ç½®</span>
</span></span><span style=display:flex><span><span style=color:#f92672>security_config</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>api_key_management</span>: <span style=color:#e6db74>&#34;å¤–éƒ¨åŒ–åˆ°ç¯å¢ƒå˜é‡&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>network_isolation</span>: <span style=color:#e6db74>&#34;ç§æœ‰ç½‘ç»œéƒ¨ç½²&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>audit_logging</span>: <span style=color:#e6db74>&#34;å®Œæ•´çš„æ“ä½œå®¡è®¡&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>data_residency</span>: <span style=color:#e6db74>&#34;æœ¬åœ°æ•°æ®å¤„ç†&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>compliance</span>: <span style=color:#e6db74>&#34;SOX, PCI-DSSå…¼å®¹&#34;</span>
</span></span></code></pre></div><h2 id=-æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘>ğŸ“ˆ æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘<a hidden class=anchor aria-hidden=true href=#-æœªæ¥å‘å±•ä¸ä¼˜åŒ–æ–¹å‘>#</a></h2><h3 id=æŠ€æœ¯è·¯çº¿å›¾>æŠ€æœ¯è·¯çº¿å›¾<a hidden class=anchor aria-hidden=true href=#æŠ€æœ¯è·¯çº¿å›¾>#</a></h3><ol><li><strong>æ¨¡å‹ç‰ˆæœ¬å‡çº§</strong>ï¼šè·Ÿè¸ªGemini 2.5 Flashçš„ç‰ˆæœ¬æ›´æ–°</li><li><strong>å¤šæ¨¡æ€èƒ½åŠ›</strong>ï¼šé›†æˆå›¾åƒå’Œå›¾è¡¨åˆ†æèƒ½åŠ›</li><li><strong>è¾¹ç¼˜éƒ¨ç½²</strong>ï¼šæ¢ç´¢æœ¬åœ°åŒ–éƒ¨ç½²æ–¹æ¡ˆ</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–å“åº”æ—¶é—´å’Œæˆæœ¬</li></ol><h3 id=ç¤¾åŒºè´¡çŒ®>ç¤¾åŒºè´¡çŒ®<a hidden class=anchor aria-hidden=true href=#ç¤¾åŒºè´¡çŒ®>#</a></h3><p>æˆ‘ä»¬è®¡åˆ’å°†ä»¥ä¸‹å†…å®¹å¼€æºï¼š</p><ul><li>K8s MCP Agentå®Œæ•´å®ç°</li><li>Gemini 2.5 Flashæœ€ä½³å®è·µé…ç½®</li><li>æ€§èƒ½æµ‹è¯•åŸºå‡†å’Œå·¥å…·</li><li>éƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬</li></ul><h2 id=-å®é™…åº”ç”¨æ¡ˆä¾‹>ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹<a hidden class=anchor aria-hidden=true href=#-å®é™…åº”ç”¨æ¡ˆä¾‹>#</a></h2><h3 id=æ¡ˆä¾‹1å¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥>æ¡ˆä¾‹1ï¼šå¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥<a hidden class=anchor aria-hidden=true href=#æ¡ˆä¾‹1å¤§è§„æ¨¡é›†ç¾¤æ•…éšœæ’æŸ¥>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># çœŸå®æ•…éšœæ’æŸ¥åœºæ™¯</span>
</span></span><span style=display:flex><span>incident_context <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cluster_nodes&#34;</span>: <span style=color:#ae81ff>50</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;affected_pods&#34;</span>: <span style=color:#ae81ff>200</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;log_volume&#34;</span>: <span style=color:#e6db74>&#34;500MB&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;context_tokens&#34;</span>: <span style=color:#e6db74>&#34;850K&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;resolution_time&#34;</span>: <span style=color:#e6db74>&#34;12åˆ†é’Ÿ&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Gemini 2.5 Flashå¤„ç†æµç¨‹</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>handle_complex_incident</span>(user_query):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 1. ç†è§£æ•…éšœæè¿°</span>
</span></span><span style=display:flex><span>    incident_analysis <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> llm<span style=color:#f92672>.</span>ainvoke(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    åˆ†æä»¥ä¸‹K8sé›†ç¾¤æ•…éšœï¼š</span><span style=color:#e6db74>{</span>user_query<span style=color:#e6db74>}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    éœ€è¦è°ƒç”¨å“ªäº›MCPå·¥å…·æ¥è¯Šæ–­é—®é¢˜ï¼Ÿ
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 2. ç³»ç»Ÿæ€§è°ƒç”¨MCPå·¥å…·</span>
</span></span><span style=display:flex><span>    tools_sequence <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;get_cluster_info&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;list_failing_pods&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;get_pod_logs&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;check_node_status&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;analyze_network_policies&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 3. ç»¼åˆåˆ†æå’Œå»ºè®®</span>
</span></span><span style=display:flex><span>    resolution <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> llm<span style=color:#f92672>.</span>ainvoke(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    åŸºäºä»¥ä¸‹çœŸå®æ•°æ®ï¼š</span><span style=color:#e6db74>{</span>tool_results<span style=color:#e6db74>}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆå’Œé¢„é˜²æªæ–½
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> resolution
</span></span></code></pre></div><h3 id=æ¡ˆä¾‹2å¤šé›†ç¾¤é…ç½®å¯¹æ¯”>æ¡ˆä¾‹2ï¼šå¤šé›†ç¾¤é…ç½®å¯¹æ¯”<a hidden class=anchor aria-hidden=true href=#æ¡ˆä¾‹2å¤šé›†ç¾¤é…ç½®å¯¹æ¯”>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># å¤„ç†å¤æ‚çš„å¤šé›†ç¾¤YAMLé…ç½®å¯¹æ¯”</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scenario</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>clusters</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>yaml_files</span>: <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>total_lines</span>: <span style=color:#ae81ff>8000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>context_usage</span>: <span style=color:#e6db74>&#34;920K tokens&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>comparison_result</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>differences_found</span>: <span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>security_issues</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>optimization_suggestions</span>: <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>processing_time</span>: <span style=color:#e6db74>&#34;25ç§’&#34;</span>
</span></span></code></pre></div><h2 id=-æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜>ğŸ”§ æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜<a hidden class=anchor aria-hidden=true href=#-æ•…éšœæ’æŸ¥ä¸è°ƒä¼˜>#</a></h2><h3 id=å¸¸è§é—®é¢˜è§£å†³>å¸¸è§é—®é¢˜è§£å†³<a hidden class=anchor aria-hidden=true href=#å¸¸è§é—®é¢˜è§£å†³>#</a></h3><ol><li><strong>ä¸Šä¸‹æ–‡æº¢å‡ºå¤„ç†</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>manage_context_overflow</span>(context_data):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> len(context_data) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>900000</span>:  <span style=color:#75715e># 90%ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># ä¼˜å…ˆä¿ç•™å…³é”®ä¿¡æ¯</span>
</span></span><span style=display:flex><span>        prioritized_data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;error_logs&#34;</span>: context_data[<span style=color:#e6db74>&#34;logs&#34;</span>][<span style=color:#f92672>-</span><span style=color:#ae81ff>50000</span>:],  <span style=color:#75715e># æœ€æ–°æ—¥å¿—</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;cluster_state&#34;</span>: context_data[<span style=color:#e6db74>&#34;cluster&#34;</span>],     <span style=color:#75715e># å®Œæ•´é›†ç¾¤çŠ¶æ€</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;user_query&#34;</span>: context_data[<span style=color:#e6db74>&#34;query&#34;</span>]          <span style=color:#75715e># ç”¨æˆ·æŸ¥è¯¢</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> prioritized_data
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> context_data
</span></span></code></pre></div><ol start=2><li><strong>å·¥å…·è°ƒç”¨å¤±è´¥é‡è¯•</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@retry</span>(max_attempts<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>, backoff_factor<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>robust_tool_call</span>(tool_name, params):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;å¸¦é‡è¯•æœºåˆ¶çš„å·¥å…·è°ƒç”¨&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> mcp_client<span style=color:#f92672>.</span>call_tool(tool_name, params)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> result<span style=color:#f92672>.</span>success:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> ToolCallError(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;å·¥å…· </span><span style=color:#e6db74>{</span>tool_name<span style=color:#e6db74>}</span><span style=color:#e6db74> è°ƒç”¨å¤±è´¥&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> result
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span>error(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;å·¥å…·è°ƒç”¨å¤±è´¥: </span><span style=color:#e6db74>{</span>tool_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, é”™è¯¯: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span>
</span></span></code></pre></div><h3 id=æ€§èƒ½è°ƒä¼˜å»ºè®®>æ€§èƒ½è°ƒä¼˜å»ºè®®<a hidden class=anchor aria-hidden=true href=#æ€§èƒ½è°ƒä¼˜å»ºè®®>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–é…ç½®</span>
</span></span><span style=display:flex><span>optimization_config <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;concurrent_tool_calls&#34;</span>: <span style=color:#ae81ff>3</span>,      <span style=color:#75715e># å¹¶å‘å·¥å…·è°ƒç”¨æ•°é‡</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;context_compression&#34;</span>: <span style=color:#66d9ef>True</span>,     <span style=color:#75715e># å¯ç”¨ä¸Šä¸‹æ–‡å‹ç¼©</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;response_streaming&#34;</span>: <span style=color:#66d9ef>True</span>,      <span style=color:#75715e># æµå¼å“åº”</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cache_tool_results&#34;</span>: <span style=color:#ae81ff>300</span>,       <span style=color:#75715e># å·¥å…·ç»“æœç¼“å­˜æ—¶é—´(ç§’)</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;batch_processing&#34;</span>: <span style=color:#66d9ef>True</span>         <span style=color:#75715e># æ‰¹é‡å¤„ç†æ¨¡å¼</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=-roiåˆ†æä¸å•†ä¸šä»·å€¼>ğŸ“Š ROIåˆ†æä¸å•†ä¸šä»·å€¼<a hidden class=anchor aria-hidden=true href=#-roiåˆ†æä¸å•†ä¸šä»·å€¼>#</a></h2><h3 id=æ•ˆç‡æå‡æ•°æ®>æ•ˆç‡æå‡æ•°æ®<a hidden class=anchor aria-hidden=true href=#æ•ˆç‡æå‡æ•°æ®>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å®æ–½å‰åå¯¹æ¯”æ•°æ®</span>
</span></span><span style=display:flex><span>efficiency_metrics <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;æ•…éšœæ’æŸ¥æ—¶é—´&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;before&#34;</span>: <span style=color:#e6db74>&#34;2-4å°æ—¶&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;after&#34;</span>: <span style=color:#e6db74>&#34;15-30åˆ†é’Ÿ&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;improvement&#34;</span>: <span style=color:#e6db74>&#34;85%&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;é…ç½®å®¡æŸ¥æ•ˆç‡&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;before&#34;</span>: <span style=color:#e6db74>&#34;1å¤©&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;after&#34;</span>: <span style=color:#e6db74>&#34;30åˆ†é’Ÿ&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;improvement&#34;</span>: <span style=color:#e6db74>&#34;95%&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;è¿ç»´äººå‘˜åŸ¹è®­&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;before&#34;</span>: <span style=color:#e6db74>&#34;2å‘¨&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;after&#34;</span>: <span style=color:#e6db74>&#34;2å¤©&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;improvement&#34;</span>: <span style=color:#e6db74>&#34;90%&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æˆæœ¬èŠ‚çº¦åˆ†æ>æˆæœ¬èŠ‚çº¦åˆ†æ<a hidden class=anchor aria-hidden=true href=#æˆæœ¬èŠ‚çº¦åˆ†æ>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å¹´åº¦æˆæœ¬èŠ‚çº¦è®¡ç®—</span>
</span></span><span style=display:flex><span>annual_savings <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;äººåŠ›æˆæœ¬èŠ‚çº¦&#34;</span>: <span style=color:#e6db74>&#34;$180,000&#34;</span>,    <span style=color:#75715e># å‡å°‘é‡å¤æ€§è¿ç»´å·¥ä½œ</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;æ•…éšœæ¢å¤æ—¶é—´&#34;</span>: <span style=color:#e6db74>&#34;$50,000&#34;</span>,     <span style=color:#75715e># å¿«é€Ÿæ•…éšœå®šä½å’Œä¿®å¤</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;åŸ¹è®­æˆæœ¬é™ä½&#34;</span>: <span style=color:#e6db74>&#34;$25,000&#34;</span>,     <span style=color:#75715e># é™ä½æ–°å‘˜å·¥åŸ¹è®­æˆæœ¬</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;APIè°ƒç”¨æˆæœ¬&#34;</span>: <span style=color:#e6db74>&#34;$8,000&#34;</span>,       <span style=color:#75715e># Gemini 2.5 Flashæˆæœ¬ä¼˜åŠ¿</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;æ€»è®¡èŠ‚çº¦&#34;</span>: <span style=color:#e6db74>&#34;$263,000&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=-æºç ä¸å‚è€ƒèµ„æº>ğŸ”— æºç ä¸å‚è€ƒèµ„æº<a hidden class=anchor aria-hidden=true href=#-æºç ä¸å‚è€ƒèµ„æº>#</a></h2><ul><li><strong>é¡¹ç›®æºç </strong>: <a href=https://github.com/jackypanster/use-k8s-mcp>K8s MCP Agent</a></li><li><strong>é…ç½®ç¤ºä¾‹</strong>: <a href=https://github.com/jackypanster/use-k8s-mcp/blob/main/.env.example>.env.example</a></li><li><strong>æŠ€æœ¯æ–‡æ¡£</strong>: <a href=https://github.com/jackypanster/use-k8s-mcp/tree/main/doc>é¡¹ç›®æ–‡æ¡£</a></li><li><strong>MCPåè®®</strong>: <a href=https://modelcontextprotocol.io/>Model Context Protocol</a></li><li><strong>OpenRouter API</strong>: <a href=https://openrouter.ai/docs>OpenRouter Documentation</a></li><li><strong>Gemini API</strong>: <a href=https://aistudio.google.com/>Google AI Studio</a></li><li><strong>Kubernetesæ–‡æ¡£</strong>: <a href=https://kubernetes.io/docs/>K8s Official Docs</a></li></ul><hr><p><strong>æ€»ç»“</strong>ï¼šé€‰æ‹©Gemini 2.5 Flashä½œä¸ºK8s MCP Agentçš„æ ¸å¿ƒLLMæ˜¯ä¸€ä¸ªç»è¿‡æ·±æ€ç†Ÿè™‘çš„æŠ€æœ¯å†³ç­–ã€‚å…¶åœ¨MCPå·¥å…·è°ƒç”¨å…¼å®¹æ€§ã€å¤§ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›ã€æˆæœ¬æ•ˆç›Šå’Œå®‰å…¨æ€§æ–¹é¢çš„ç»¼åˆä¼˜åŠ¿ï¼Œä½¿å…¶æˆä¸ºä¼ä¸šçº§K8sè¿ç»´è‡ªåŠ¨åŒ–çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡åˆç†çš„é…ç½®å’Œæœ€ä½³å®è·µï¼ŒGemini 2.5 Flashèƒ½å¤Ÿä¸ºK8sè¿ç»´å¸¦æ¥é©å‘½æ€§çš„æ•ˆç‡æå‡ï¼Œå®ç°æ˜¾è‘—çš„ROIå’Œå•†ä¸šä»·å€¼ã€‚</p><p>å¯¹äºæ­£åœ¨è€ƒè™‘ç±»ä¼¼æŠ€æœ¯é€‰å‹çš„å›¢é˜Ÿï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èæ·±å…¥è¯„ä¼°Gemini 2.5 Flashçš„èƒ½åŠ›ã€‚å…¶åœ¨å·¥å…·è°ƒç”¨ã€å¤§ä¸Šä¸‹æ–‡å¤„ç†å’Œæˆæœ¬æ§åˆ¶æ–¹é¢çš„ä¼˜åŠ¿ï¼Œå°†ä¸ºæ‚¨çš„AIé©±åŠ¨è¿ç»´ç³»ç»Ÿå¸¦æ¥è´¨çš„é£è·ƒã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jackypanster.github.io/ai-stream/tags/llm/>LLM</a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/mcp/>MCP</a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/kubernetes/>Kubernetes</a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/gemini/>Gemini</a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/>å·¥å…·è°ƒç”¨</a></li><li><a href=https://jackypanster.github.io/ai-stream/tags/%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/>æŠ€æœ¯é€‰å‹</a></li></ul><nav class=paginav><a class=prev href=https://jackypanster.github.io/ai-stream/posts/the-ultimate-guide-to-multi-gpu-ollama-deployment/><span class=title>Â« Prev</span><br><span>ä»å•å¡ç“¶é¢ˆåˆ°å››å¡é½é£ï¼šä¸€æ¬¡å®Œæ•´çš„Ollamaå¤šGPUæœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ–å®æˆ˜</span>
</a><a class=next href=https://jackypanster.github.io/ai-stream/posts/check-docker-image-size/><span class=title>Next Â»</span><br><span>ä¼˜åŒ–CI/CDç®¡é“ï¼šå®ç°Dockeré•œåƒç™½åå•ç»§æ‰¿æœºåˆ¶</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on x" href="https://x.com/intent/tweet/?text=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90&amp;url=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f&amp;hashtags=LLM%2cMCP%2cKubernetes%2cGemini%2c%e5%b7%a5%e5%85%b7%e8%b0%83%e7%94%a8%2c%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f&amp;title=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90&amp;summary=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90&amp;source=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on whatsapp" href="https://api.whatsapp.com/send?text=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90%20-%20https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on telegram" href="https://telegram.me/share/url?text=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90&amp;url=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ä¸ºä»€ä¹ˆé€‰æ‹©Gemini 2.5 Flashé©±åŠ¨K8s MCP Agentï¼šæ·±åº¦æŠ€æœ¯é€‰å‹åˆ†æ on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9Gemini%202.5%20Flash%e9%a9%b1%e5%8a%a8K8s%20MCP%20Agent%ef%bc%9a%e6%b7%b1%e5%ba%a6%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b%e5%88%86%e6%9e%90&u=https%3a%2f%2fjackypanster.github.io%2fai-stream%2fposts%2fgemini-2.5-flash-mcp-tech-selection%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://jackypanster.github.io/ai-stream/>AI é¿éš¾æ‰€</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>